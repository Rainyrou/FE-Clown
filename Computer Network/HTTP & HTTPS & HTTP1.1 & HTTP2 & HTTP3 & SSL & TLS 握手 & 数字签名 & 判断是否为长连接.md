HTTP：

1. 简单：报文格式为 header + body ，头部为 key + value
2. 易于扩展：请求方法、URI/URL、状态码和头部字段等允许自定义扩展，此外由于 HTTP 在应用层，其下层可变化如 HTTPS 在 HTTP 与 TCP 层间增加 SSL/TLS 安全传输层，HTTP/3 将 TCP 层换为基于 UDP 的 QUIC
3. 跨平台
4. 无状态：HTTP 无状态，服务端无需记录其状态信息，但每次进行有关联性的操作时均需认证用户身份
5. 明文传输：通过 F12 控制台和 Wireshark 抓包直接查看传输过程中的信息，便于调试，但也相当于信息裸奔
6. 未验证接收方身份且无法验证报文的完整性

HTTPS：

1. HTTP 端口号为 80，HTTPS 端口号为 443
2. HTTP 在 TCP 三次握手后即可建立连接，而 HTTPS 在 TCP 三次握手后还需进行 SSL/TLS 握手方可建立连接
3. HTTPS 采用对称加密和非对称加密结合的混合加密方式，在建立连接前以非对称加密的方式交换秘钥，在通信过程中以对称加密的方式加密明文，对称加密只使用一个密钥，基于置换原理，通过多轮转换将明文转换为密文，速度快，但密钥必须保密，而非对称加密使用公钥和私钥，速度慢但安全性更高，非对称加密无需通信双方共享同一密钥，公钥公开，私钥保密，其存在特定的数学关系（基于数学难题如大数因子分解（RSA 算法）、离散对数（ElGamal 算法）和椭圆曲线对数（ECC 算法）），但仅根据公钥难以推导私钥
4. 服务端公钥置于数字证书以验证接收方身份
5. HTTPS 以摘要算法实现报文的完整性

HTTP1.1：

1. 长连接：HTTP1.1 采用长连接的方式，通信双方持久连接除非一方主动断开
2. 管道传输：在同一 TCP 连接里并发多个 HTTP1.1 请求，发送一个请求后，无需等待其返回即可发送下一请求

HTTP2：

1. 头部压缩：HPACK 压缩算法压缩重复头部
2. 二进制格式：头信息帧和数据体帧，接收到报文后直接解析，无需将明文转换为二进制
3. 数据流：标记数据包，无需依照顺序发送，指定数据流优先级，允许接收方控制发送方的数据接收量，避免接收方的缓冲区溢出
4. 多路复用：通过一个 TCP 连接实现多个请求和响应的并行传输，每个请求和响应对应一个流，二进制分帧层将一个 TCP 连接中的多个请求拆分为小帧并通过为每个请求/响应分配唯一流 ID，服务端接收所有请求的帧，根据流 ID 将帧分发至对应的流处理器，并行处理多个请求，通过同一 TCP 连接交错返回响应，客户端根据流 ID 将帧重组为完整的响应，分发到对应的请求回调
5. 服务端主动推送

HTTP3：

1. 头部压缩：QPACK 压缩算法压缩重复头部
2. HTTP3 以二进制格式，直接使用 QUIC 中流的概念

![[Pasted image 20240424172105.png]]

3. QUIC 基于 UDP，提供类 TCP 的可靠性传输，其整合连接和加密过程，只需一个 RTT 即可完成握手，且支持前向纠错机制，无需重新传输即可恢复丢包，此外 0-RTT 恢复实现移动设备无缝切换网络

SSL/TLS 握手：

1. ClientHello：客户端发送一个 ClientHello 给服务端，其包含客户端支持的 TLS 版本，可接受的密码套件（密钥交换算法、对称加密算法、消息认证码算法）及客户端生成的随机数 Client Random
2. ServerHello：服务端返回一个 ServerHello，从客户端提供的选项中选择 TLS 版本和密码套件，并提供服务端生成的随机数 Server Random 和证书，必要时还提供 ServerKeyExchange，提供更多加密相关的参数，接着服务端发送 ServerHelloDone，表示服务端 Hello 阶段结束
3. 客户端响应：客户端发送 ClientKeyExchange，若服务端请求认证，则客户端发送证书，接着发送 ChangeCipherSpec 和 Finished，告诉服务端后续消息使用之前协商的密码套件进行加密，Finished 包含前面消息的校验值，以验证握手过程的完整性
4. 服务端响应：服务端发送 ChangeCipherSpec 和 Finished，Finished 包含前面消息的校验值，以验证握手过程的完整性
5. 加密传输：一旦客户端和服务端交换 Finished，即完成 TLS 握手，双方使用选定的加密算法和密钥进行加密数据传输

数字签名：

1. 发送方 A 生成消息哈希，以其私钥加密生成数字签名
2. 发送方 A 发送原始消息和数字签名到接收方 B
3. 接收方B 接收到消息后，通过发送方 A 的公钥解密数字签名，获取哈希值 1
4. 接收方 B计算接收到的消息之哈希，获取哈希值 2
5. 若哈希值 1 等于哈希值 2，则数字签名验证成功，消息来源于发送方 A 且未被篡改

判断是否为长连接：

- HTTP 1.0 在请求和响应头部指定 `Connection: keep-alive`
- HTTP 1.1 以上默认为长连接