- 结论（30s）：核心是基于浏览器原生 DOM 底层能力，通过「API 拦截 + 快照对比 + 事件兜底」的组合策略模拟 MutationObserver 的"异步感知 DOM 修改 + 批量回调"实现
- 落地细节（240s）：基于不同业务实践，我给出三类方案的优劣与取舍逻辑：
  1. DOM API 拦截：核心是「原型链重写注入钩子」—— 在不破坏执行上下文和返回值的前提下，重写 `innerHTML/appendChild/setAttribute` 等原生 DOM 方法，在方法执行前后捕获目标节点、修改的类型和相关数据，优势是「实时性」，劣势是「覆盖不全，如无法拦截间接 DOM 操作」，需兼容不同浏览器内核的 API 实现差异
  2. 快照对比：核心是「高精度轮询 + 哈希对比」—— 基于 `requestAnimationFrame` 绑定浏览器重绘周期，根据节点唯一标识 + 属性和子节点列表哈希维护 DOM 节点的轻量快照，通过前后快照哈希差异定位增量更新，优势是「覆盖全面 + 无 API 侵入」，劣势是「取决于轮询周期，存在延迟」，需通过节流合并减少主线程遍历开销
  3. 事件兜底：核心是「原生 DOM 事件冒泡监听」—— 绑定 `input/change/DOMAttrModified` 等事件，通过事件机制捕获特定场景更新，将事件回调与其他方案结果去重，优势是「轻量化」，劣势是「覆盖不全」，需配合上述两种方案补全场景
- 取舍逻辑（45s）：实战中采用组合策略—— 高频 DOM 操作如增删节点和修改属性依赖 DOM API 拦截以保证实时性，批量修改如 innerHTML 替换依赖快照对比补全覆盖，文本/表单节点修改依赖事件兜底优化性能，同时进行防抖节流、浏览器内核适配与内存清理，在低版本浏览器中实现类似 MutationObserver 的能力，在兼容性与用户体验上取得 trade-off
