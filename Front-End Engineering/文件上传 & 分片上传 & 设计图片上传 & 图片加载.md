文件上传：

- 通过 POST 请求提交 Form 表单
- AJAX/Axios/Fetch + FormData 对象
- AJAX/Axios/Fetch + FileReader 转换文件为二进制数据
- 分片上传

分片上传：将大文件转换为二进制数据，通过 `promise.allSettled` 并行上传，首个分片携带大文件 MD5 值和文件分片数，各个分片携带分片 MD5 值和 index，分片上传完毕即发送查询请求，后端返回未接收的分片信息，重传分片

设计图片上传 & 图片加载：

1. 接口设计

- 接口命名语义化，参数分为必选核心参数（如业务标识/图片 URL）和可选拓展参数（如压缩规则/缓存规则），保证核心功能的最小接入成本，同时适配不同业务场景的个性化需求，避免参数冗余
- 接口核心逻辑与扩展逻辑解耦，支持业务方注册自定义插件（如自定义图片压缩规则/错误兜底逻辑）

2. 性能优化：

- 动态适配：判断浏览器对图片格式的兼容性（WebP/JPEG/PNG/GFI/SVG）；通过 `navigator.userAgent/window.devicePixelRatio` 分别判断机型设备和设备像素比，上传/加载合适的分辨率图片
- 上传/加载策略：优先级上传/加载（设置 `fetchpriority="high"`）+ 并发限制 + 断点续传/预加载（配置触发条件，提前缓存需要展示的图片）+ 懒加载（`Intersection Observer`）
- 多级缓存：内存缓存（基于 LRU 算法） + 本地缓存（`localStorage/IndexedDB`）+ CDN 缓存
- 网络请求：取消请求

3. 异常处理：

- 错误分类：判断错误类型（格式错误/网络错误/跨域错误/超时错误），返回状态码 + 错误信息
- 重试机制：对网络请求失败通过指数退避重试（重试间隔 1s → 2s → 4s）并限制最大重试次数
- 跨域处理：配置 CORS 请求头部或通过 SDK 内置代理解决跨域问题
- 传输安全：请求通过 HTTPS 传输，完整文件和分片 MD5 哈希
* 降级兜底：加载失败时优先级为通过备用 CDN 加载 → 占位图渲染兜底 → 业务方自定义兜底逻辑
* 安全合规：校验图片 URL，过滤转义清洗特殊字符，限制协议/域名白名单

4. 埋点设计：内置核心指标埋点（上传耗时/加载耗时/缓存命中率），支持业务方接入自定义埋点



