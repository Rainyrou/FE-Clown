暗黑主题：浏览器启动时读取操作系统的颜色偏好设置并将其映射为 `prefers-color-scheme`，前端通过媒体查询 `prefers-color-scheme`  与 JavaScript `window.matchMedia/addEventListener` 监听主题变化

- 样式覆盖：通过在 HTML 标签上设置两套主题类名
- CSS 变量：在根元素上声明两套主题变量，前端工程化定义"主题无关的变量名 + 主题相关的变量值"，形成变量映射表，切换主题时，只需修改根元素的变量值，所有依赖这些变量的样式自动更新 —— 比通过类名覆盖所有样式的方式减少 90% 以上的 CSS 代码量且避免样式冲突

| 变量名（主题无关） | 亮色模式值 | 暗黑模式值 |     |
| ------------------ | ---------- | ---------- | --- |
| `--color-bg`       | #ffffff    | #121212    |     |
| `--color-text`     | #333333    | #e0e0e0    |     |
| `--color-primary`  | #2196F3    | #4DABF7    |     |

暗黑主题并非全局换色，而需处理"组件适配、第三方内容兼容、动态内容兼容"等复杂场景，底层依赖设计系统标准化与适配逻辑分层

- 主题 token：从底层到上层分为基础 token（纯颜色值，无业务含义如 `--color-white: #ffffff`） → 语义化 token（关联业务含义，暗黑模式仅修改语义化 token 的映射如 `--color-bg-page: var(--color-white)`） → 组件 token（组件专属样式，依赖语义化 token，无需单独适配如 `--button-bg-primary: var(--color-primary)`），避免为各个组件单独编写暗黑样式，减少 80% 的 CSS 样式适配代码量
- 第三方内容兼容：样式隔离与继承 + 解决冲突 -> 变量作用域隔离、强制覆盖
* 动态内容兼容：UGC 内容包含硬编码的亮色样式，通过 CSS 滤镜反转，为 UGC 容器添加 `filter: invert(1) hue-rotate(180deg)` 反转颜色（白色 → 黑色），再通过 `hue-rotate` 恢复图片的原始色调
* 存储与同步：优先级用户手动设置 > 系统主题 > 应用默认，存储于 `localStorage` 或 `IndexedDB` 的优先级最高，无用户设置时，通过 JavaScript `window.matchMedia/addEventListener` 读取系统偏好，均无时，默认亮色模式
