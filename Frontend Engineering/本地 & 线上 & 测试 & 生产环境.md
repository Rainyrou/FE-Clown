- 即使项目已经上线，你仍应保留一个本地开发环境，以便在本地进行开发测试，只有在本地测试通过后，才能将代码推送到远程仓库并部署到生产环境
- 为让本地开发环境更接近线上环境，可通过 mock 数据或连接到线上的数据库副本（确保安全性）来进行模拟
- 在真正的生产环境之外，额外设置一个线上 staging 测试环境，尽可能地模拟生产环境，包括使用相同的硬件和网络配置、数据库以及第三方服务等
- 使用 CI/CD 工具如 Jenkins、GitHub Actions、GitLab CI/CD 等来自动化构建、测试和部署流程。设置代码推送的特定的分支如 `develop` 或 `staging` 分支，自动部署到线上测试环境
- 在线上测试环境中进行全面测试，包括功能、性能和安全测试等，确保一切按预期工作，没有引入新的 bug。测试通过后，再将代码部署到生产环境

* 对每一个新 feature 或 fix，都在一个独立的分支上进行开发，避免直接在主分支上进行修改
* 在代码合并到主分支之前进行代码审查，确保代码质量

###### Vite 怎么知道是生产 or 开发环境

在 Vite 构建的项目中，环境变量可通过 `import.meta.env` 来访问，其中 `MODE` 是一个特殊的环境变量，用于区分当前的运行环境。Vite 在构建或开发模式下运行时会自动设置 `MODE` 的值：当使用 `vite` 或 `vite serve` 命令启动项目时，Vite 将 `import.meta.env.MODE` 设置为 `development`。当使用 `vite build` 命令构建项目时，Vite 将`import.meta.env.MODE` 设置为 `production`

###### 本地开发环境

上传图片路径：

![[bd7b5805550af2ef383e5d650e49ed5.png]]

上传图片请求路径：

![[8f342d0d263d6af404eede493007af2.png]]

###### 生产环境

上传图片路径：

![[1709467201919.png]]

上传图片请求路径：

![[1709467126887.png]]

