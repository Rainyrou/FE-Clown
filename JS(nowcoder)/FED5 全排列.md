è¯·è¡¥å…¨ JavaScript ä»£ç ï¼Œè¦æ±‚ä»¥æ•°ç»„çš„å½¢å¼è¿”å›žå­—ç¬¦ä¸²å‚æ•°çš„æ‰€æœ‰æŽ’åˆ—ç»„åˆã€‚

æ³¨æ„ï¼š

1. å­—ç¬¦ä¸²å‚æ•°ä¸­çš„å­—ç¬¦æ— é‡å¤ä¸”ä»…åŒ…å«å°å†™å­—æ¯
2. è¿”å›žçš„æŽ’åˆ—ç»„åˆæ•°ç»„ä¸åŒºåˆ†é¡ºåº

ç¤ºä¾‹ 1ï¼š

```
è¾“å…¥ï¼š_permute('abc')

è¾“å‡ºï¼š['abc','acb','bac','bca','cab','cba']
```

![[1693101540747.png]]

##### String.prototype.split()

[String.prototype.split() - JavaScript | MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/split)

**`split()`**Â  æ–¹æ³•æŽ¥å—ä¸€ä¸ªæ¨¡å¼ï¼Œé€šè¿‡æœç´¢æ¨¡å¼å°†å­—ç¬¦ä¸²åˆ†å‰²æˆä¸€ä¸ªæœ‰åºçš„å­ä¸²åˆ—è¡¨ï¼Œå°†è¿™äº›å­ä¸²æ”¾å…¥ä¸€ä¸ªæ•°ç»„ï¼Œå¹¶è¿”å›žè¯¥æ•°ç»„

```JavaScript
split(separator);
split(separator, limit);
```

###### å‚æ•°

1. `separator`ï¼šæŒ‡å®šäº†å“ªäº›ä½ç½®æˆ–æ¨¡å¼åº”è¢«å½“ä½œåˆ†éš”ç¬¦

- å¦‚æžœæ²¡æœ‰æä¾› `separator` æˆ–è€…ä¼ é€’äº† `undefined`ï¼Œ`split()` æ–¹æ³•ä¼šè¿”å›žä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„åªåŒ…å«åŽŸå§‹å­—ç¬¦ä¸²
- å­—ç¬¦ä¸²: æ¯”å¦‚ `,`ï¼Œä¼šæŒ‰ç…§è¿™ä¸ªå­—ç¬¦ä¸²ä¸ºåˆ†éš”ç¬¦æ¥åˆ†å‰²
- å…·æœ‰ `Symbol.split` æ–¹æ³•çš„å¯¹è±¡ï¼Œå…¸åž‹çš„ä¾‹å­æ˜¯æ­£åˆ™è¡¨è¾¾å¼
- å¦‚æžœä¼ å…¥çš„å€¼ä¸æ˜¯ `undefined` å¹¶ä¸”å¯¹è±¡ä¸å…·æœ‰ `@@split` æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ªå€¼å°†è¢«å¼ºåˆ¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åŽç”¨ä½œåˆ†éš”ç¬¦

  2.`limit` (å¯é€‰)ï¼šé™åˆ¶ç»“æžœæ•°ç»„ä¸­å­å­—ç¬¦ä¸²çš„æ•°é‡ã€‚

- å¦‚æžœæä¾›äº† `limit`ï¼Œ`split` æ–¹æ³•ä¼šæŒ‰ç…§æŒ‡å®šçš„ `separator` åˆ†å‰²å­—ç¬¦ä¸²ï¼Œä½†åœ¨è¾¾åˆ° `limit` æ•°é‡çš„å­å­—ç¬¦ä¸²åŽï¼Œå®ƒå°†åœæ­¢åˆ†å‰²
- å¦‚æžœå­—ç¬¦ä¸²åœ¨è¾¾åˆ°æŒ‡å®šçš„ `limit` æ•°é‡ä¹‹å‰å°±å·²ç»è¢«å®Œå…¨åˆ†å‰²äº†ï¼Œè¿”å›žçš„æ•°ç»„çš„é•¿åº¦å¯èƒ½ä¼šå°äºŽ `limit`
- å¦‚æžœ `limit` æ˜¯ `0`ï¼Œè¿”å›žä¸€ä¸ªç©ºæ•°ç»„ `[]`

###### è¿”å›žå€¼

åœ¨ç»™å®šå­—ç¬¦ä¸²ä¸­å‡ºçŽ° Â `separator`Â  çš„æ¯ä¸€ä¸ªç‚¹ä¸Šè¿›è¡Œåˆ†å‰²è€Œæˆçš„å­—ç¬¦ä¸²æ•°ç»„

###### æ³¨æ„äº‹é¡¹

- å¦‚æžœä¼ å…¥ä¸€ä¸ªéžç©ºå­—ç¬¦ä¸²ä½œä¸º `separator`ï¼Œé‚£ä¹ˆåŽŸå§‹å­—ç¬¦ä¸²ä¼šåœ¨æ¯æ¬¡å‡ºçŽ°è¿™ä¸ª `separator` çš„åœ°æ–¹è¢«åˆ†å‰²ã€‚åˆ†å‰²ç»“æžœä¸­ä¸åŒ…æ‹¬ `separator`æœ¬èº«

```JavaScript
const myString = "Hello\0offer\Clown";
const result = myString.split("\t");
console.log(result); // ["Hello", "0offer", "Clown"];
```

- å¦‚æžœ `separator` åŒ…å«å¤šä¸ªå­—ç¬¦ï¼Œåªæœ‰å½“è¿™æ•´ä¸ªå­—ç¬¦åºåˆ—éƒ½å‡ºçŽ°æ—¶æ‰ä¼šåˆ†å‰²
- å¦‚æžœ `separator` å‡ºçŽ°åœ¨å­—ç¬¦ä¸²çš„å¼€å§‹æˆ–ç»“æŸï¼Œè¿”å›žçš„æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªæˆ–æœ€åŽä¸€ä¸ªå…ƒç´ å°†æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²
- å¦‚æžœ `separator` åœ¨æ•´ä¸ªå­—ç¬¦ä¸²ä¸­éƒ½æ²¡æœ‰å‡ºçŽ°ï¼Œé‚£ä¹ˆè¿”å›žçš„æ•°ç»„åªä¼šåŒ…å«ä¸€ä¸ªå…ƒç´ ï¼Œå³æ•´ä¸ªå­—ç¬¦ä¸²

* å¦‚æžœ `separator` æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆåŽŸå§‹å­—ç¬¦ä¸²ä¼šè¢«è½¬æ¢ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯åŽŸå§‹å­—ç¬¦ä¸²çš„ä¸€ä¸ªå­—ç¬¦

```JavaScript
const str = "Hello";
const result = str.split("");
console.log(result); // ["H", "e", "l", "l", "o"];
```

- å½“ä½¿ç”¨åŒ¹é…ç©ºå­—ç¬¦ä¸²çš„æ­£åˆ™è¡¨è¾¾å¼ä½œä¸º `separator` æ—¶ï¼Œå¦‚ä½•åˆ†å‰²å­—ç¬¦ä¸²å–å†³äºŽæ­£åˆ™è¡¨è¾¾å¼æ˜¯å¦è®¾ç½®äº† `u` æ ‡å¿—
- å¦‚æžœæ²¡æœ‰è®¾ç½® `u` æ ‡å¿—ï¼Œå­—ç¬¦ä¸²ä¼šæŒ‰ UTF-16 ç å…ƒï¼ˆcode unitï¼‰è¿›è¡Œåˆ†å‰²ã€‚å¯¹äºŽé‚£äº›éœ€è¦ä¸¤ä¸ªç å…ƒæ¥è¡¨ç¤ºçš„å­—ç¬¦ï¼ˆä¾‹å¦‚ï¼ŒæŸäº›è¡¨æƒ…ç¬¦å·ï¼‰ï¼Œè¿™ä¼šå¯¼è‡´å­—ç¬¦è¢«æ‹†åˆ†
- å¦‚æžœè®¾ç½®äº† `u` æ ‡å¿—ï¼Œå­—ç¬¦ä¸²ä¼šæŒ‰ Unicode ç ä½ï¼ˆcode pointï¼‰è¿›è¡Œåˆ†å‰²ï¼Œç¡®ä¿æ¯ä¸ªå­—ç¬¦éƒ½æ˜¯å®Œæ•´çš„

```JavaScript
"ðŸ˜„ðŸ˜„".split(/(?:)/);   // [ "\ud83d", "\ude04", "\ud83d", "\ude04" ]
"ðŸ˜„ðŸ˜„".split(/(?:)/u); // [ "ðŸ˜„", "ðŸ˜„" ]
```

- åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œæ•èŽ·æ‹¬å·ç”±æ™®é€šçš„åœ†æ‹¬å· `()` æ¥å®šä¹‰ã€‚å¦‚æžœ `separator` æ˜¯ä¸€ä¸ªåŒ…å«æ•èŽ·æ‹¬å·çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ¯å½“ `separator` åŒ¹é…åˆ°ä¸€ä¸ªä½ç½®ï¼Œæ•èŽ·æ‹¬å·å†…åŒ¹é…åˆ°çš„å†…å®¹éƒ½ä¼šè¢«æ·»åŠ åˆ°ç»“æžœæ•°ç»„ä¸­ï¼Œè¿™æ˜¯ç”±æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡çš„ `Symbol.split` æ–¹æ³•æŒ‡å®šçš„

- å¦‚æžœä¼ é€’ç»™ `split()` æ–¹æ³•çš„ `separator` æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”è¿™ä¸ªå¯¹è±¡æœ‰ `Symbol.split` æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•ä¼šè¢«è°ƒç”¨ã€‚åœ¨è°ƒç”¨ `Symbol.split` æ–¹æ³•æ—¶ï¼Œä¼šå°†åŽŸå§‹å­—ç¬¦ä¸²å’Œ `limit` ä½œä¸ºå‚æ•°ï¼Œè€Œ `this` å…³é”®å­—ä¼šè®¾ç½®ä¸º `separator` å¯¹è±¡ã€‚`Symbol.split` æ–¹æ³•çš„è¿”å›žå€¼ä¼šç›´æŽ¥ä½œä¸º `split()` æ–¹æ³•çš„è¿”å›žå€¼

##### Array.prototype.join()

[Array.prototype.join() - JavaScript | MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/join)

**`join()`**Â  æ–¹æ³•å°†ä¸€ä¸ªæ•°ç»„ï¼ˆæˆ–ä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡ï¼‰çš„æ‰€æœ‰å…ƒç´ è¿žæŽ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²å¹¶è¿”å›žè¯¥å­—ç¬¦ä¸²ï¼Œç”¨é€—å·æˆ–æŒ‡å®šçš„åˆ†éš”ç¬¦å­—ç¬¦ä¸²åˆ†éš”ã€‚å¦‚æžœæ•°ç»„åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆå°†è¿”å›žè¯¥å…ƒç´ è€Œä¸ä½¿ç”¨åˆ†éš”ç¬¦

```JavaScript
join();
join(separator);
```

###### å‚æ•°

`separator`ï¼ˆå¯é€‰ï¼‰ï¼šç”¨äºŽåœ¨æ•°ç»„çš„æ¯ä¸ªå…ƒç´ ä¹‹é—´ä½œä¸ºåˆ†éš”ç¬¦ã€‚å¦‚æžœçœç•¥ï¼Œé»˜è®¤ä½¿ç”¨é€—å· `,` ä½œä¸ºåˆ†éš”ç¬¦ã€‚å¦‚æžœ `separator` æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼ˆ`""`ï¼‰ï¼Œé‚£ä¹ˆè¿žæŽ¥çš„å­—ç¬¦ä¸²ä¸­ä¸ä¼šæœ‰ä»»ä½•åˆ†éš”ç¬¦

###### è¿”å›žå€¼

è¿”å›žè¿žæŽ¥åŽçš„å­—ç¬¦ä¸²ã€‚å¦‚æžœæ•°ç»„ä¸ºç©ºï¼Œåˆ™è¿”å›žç©ºå­—ç¬¦ä¸²

###### æ³¨æ„äº‹é¡¹

- å¦‚æžœå…ƒç´ çš„å€¼æ˜¯ `undefined` æˆ– `null`ï¼Œé‚£ä¹ˆå®ƒä»¬ä¼šè¢«è§†ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯å­—é¢ä¸Šçš„"undefined"æˆ–"null"å­—ç¬¦ä¸²
- å½“ä½ åœ¨æ•°ç»„ä¸Šè°ƒç”¨ `toString()` æ–¹æ³•æ—¶ï¼Œå®žé™…ä¸Šåœ¨å†…éƒ¨ï¼Œå®ƒä¼šè°ƒç”¨ `join()` æ–¹æ³•ä¸”ä¸å¸¦ä»»ä½•å‚æ•°ã€‚å¦‚æžœä½ åœ¨ç‰¹å®šçš„æ•°ç»„å®žä¾‹ä¸Šé‡å†™äº† `join` æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒçš„ `toString` è¡Œä¸ºä¹Ÿä¼šè¢«ç›¸åº”åœ°æ”¹å˜
- åœ¨ç¨€ç–æ•°ç»„ä¸Šè°ƒç”¨ `join()` æ—¶ï¼Œè¿™äº›æœªå®šä¹‰çš„ç´¢å¼•ï¼ˆæˆ–"ç©ºæ§½"ï¼‰çš„å€¼ä¼šè¢«è§†ä¸ºä¸º `undefined`ï¼Œå› æ­¤åœ¨è¿žæŽ¥çš„å­—ç¬¦ä¸²ä¸­ä¼šè¢«å½“ä½œç©ºå­—ç¬¦ä¸²

```JavaScript
console.log([1,,3].join()); // '1,,3'
console.log([1,undefined,3].join()); // '1,,3'
```

- `join()` æ–¹æ³•æ˜¯é€šç”¨çš„ï¼Œåªè¦å¯¹è±¡å…·æœ‰ `length` å±žæ€§å’Œæ•´æ•°é”®ï¼ˆç±»ä¼¼äºŽæ•°ç»„çš„ç´¢å¼•ï¼‰ï¼Œé‚£ä¹ˆ `join()` æ–¹æ³•ä¹Ÿå¯ä»¥åœ¨è¿™äº›å¯¹è±¡ä¸Šä½¿ç”¨ã€‚è¿™ç§ç‰¹æ€§æ˜¯ç”±äºŽ JavaScript ä¸­çš„åŠ¨æ€ç±»åž‹å’ŒåŽŸåž‹ç»§æ‰¿çš„çµæ´»æ€§

```JavaScript
const arrayLike = {
	length: 3,
	0: 2,
	1: 3,
	2: 4
};
console.log(Array.prototype.join.call(arrayLike)); // 2,3,4
```

##### Array.prototype.forEach()

[Array.prototype.forEach() - JavaScript | MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)

**`forEach()`**Â  æ–¹æ³•å¯¹æ•°ç»„çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€æ¬¡ç»™å®šçš„å‡½æ•°

```JavaScript
forEach(callbackFn);
forEach(callbackFn, thisArg);
```

###### å‚æ•°

`callbackFn`ï¼šä¸ºæ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ æ‰§è¡Œçš„å‡½æ•°ã€‚å¹¶ä¼šä¸¢å¼ƒå®ƒçš„è¿”å›žå€¼ã€‚è¿™ä¸ªå‡½æ•°å¯ä»¥æŽ¥å—ä¸‰ä¸ªå‚æ•°ï¼šå½“å‰å…ƒç´ ï¼ˆelementï¼‰ã€å½“å‰å…ƒç´ çš„ç´¢å¼•ï¼ˆindexï¼‰å’Œè°ƒç”¨äº† `forEach()` çš„æ•°ç»„æœ¬èº«ï¼ˆarrayï¼‰

`thisArg`ï¼ˆå¯é€‰ï¼‰ï¼šå½“æ‰§è¡Œ `callbackFn` æ—¶æŒ‡å®šçš„ `this` çš„å€¼ã€‚å¦‚æžœä¸ä¼ é€’ `thisArg`ï¼Œ`callbackFn` å†…éƒ¨çš„ `this` å°†æ˜¯ `undefined`

###### è¿”å›žå€¼

`undefined`

###### æ³¨æ„äº‹é¡¹

- `forEach()` æŒ‰ç´¢å¼•çš„å‡åºä¸ºæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ è°ƒç”¨ `callbackFn`
- ä¸åŒäºŽ `map()`ï¼ˆå¯ä»¥è¿”å›žä¸€ä¸ªæ–°æ•°ç»„ï¼‰ï¼Œ`forEach()` æ€»æ˜¯è¿”å›ž `undefined`ï¼Œå› æ­¤ä¸èƒ½ç”¨äºŽé“¾å¼è°ƒç”¨

- `forEach()` ä¸ä¼šä¸ºç¨€ç–æ•°ç»„ä¸­çš„ç©ºæ§½è°ƒç”¨ `callbackFn`

```JavaScript
const arr = [1, 3, , 7];
let count = 0;

arr.forEach((element) => {
	console.log({ element });
	++count;
});

console.log({ count });
// { element: 1 }
// { element: 3 }
// { element: 7 }
// { count: 3 }
```

- `forEach()` è‡ªèº«ä¸ä¼šæ›´æ”¹è°ƒç”¨å®ƒçš„æ•°ç»„ï¼Œä½†åœ¨ `callbackFn` ä¸­å¯ä»¥æ›´æ”¹æ•°ç»„
- å½“ `forEach()` å¼€å§‹æ‰§è¡Œæ—¶ï¼Œæ•°ç»„çš„é•¿åº¦å·²è¢«ä¿å­˜ã€‚å¦‚æžœåœ¨è¿­ä»£è¿‡ç¨‹ä¸­æ›´æ”¹äº†æ•°ç»„çš„é•¿åº¦ï¼Œ`callbackFn` ä¸ä¼šä¸ºè¶…å‡ºåˆå§‹é•¿åº¦çš„æ–°å…ƒç´ è°ƒç”¨
- å¦‚æžœæ›´æ”¹äº†å·²ç»è®¿é—®è¿‡çš„ç´¢å¼•çš„å€¼ï¼Œ`callbackFn` ä¸ä¼šä¸ºå®ƒä»¬å†æ¬¡è°ƒç”¨
- å¦‚æžœåœ¨ `callbackFn` ä¸­æ›´æ”¹äº†ä¸€ä¸ªå·²ç»å­˜åœ¨ä½†å°šæœªè®¿é—®çš„å…ƒç´ çš„å€¼ï¼Œåˆ™å½“è®¿é—®åˆ°è¯¥å…ƒç´ æ—¶ï¼Œ`callbackFn` å°†ä½¿ç”¨è¿™ä¸ªæ–°å€¼ã€‚å·²ç»è¢«åˆ é™¤çš„å…ƒç´ åœ¨è¿­ä»£è¿‡ç¨‹ä¸­ä¸ä¼šè¢«è®¿é—®

```JavaScript
const arr = [1, 2, 3, 4, 5];
arr.forEach((element, index, array) => {
	console.log(`Element: ${element}, Index: ${index}, Array: ${array}`);
});
```

- `forEach()` æ–¹æ³•æ˜¯é€šç”¨çš„ï¼Œä½ å¯ä»¥åœ¨éžæ•°ç»„å¯¹è±¡ä¸Šè°ƒç”¨å®ƒï¼Œåªè¦è¯¥å¯¹è±¡å…·æœ‰ `length` å±žæ€§å’Œæ•´æ•°é”®

```JavaScript
let obj = {
	0: 'a',
	1: 'b',
	2: 'c',
	length: 3
};

Array.prototype.forEach.call(obj, item => {
	console.log(item); // a b c
})
```

- `forEach()` æœ¬èº«ä¸æä¾›åœæ­¢è¿­ä»£æˆ–ä¸­æ–­å¾ªçŽ¯çš„æœºåˆ¶ã€‚å³ä½¿åœ¨å›žè°ƒå‡½æ•°ä¸­ä½¿ç”¨ `return` ä¹Ÿåªæ˜¯è·³è¿‡å½“å‰è¿­ä»£ï¼Œå¹¶ä¸åœæ­¢å¾ªçŽ¯ã€‚å¦‚æžœéœ€è¦æœ‰æ¡ä»¶åœ°ä¸­æ–­å¾ªçŽ¯ï¼Œåº”è¯¥è€ƒè™‘ä½¿ç”¨å…¶ä»–å¾ªçŽ¯æ–¹æ³•ï¼Œä¾‹å¦‚ `for`ã€`for...of` æˆ– `for...in`ï¼Œå› ä¸ºåœ¨è¿™äº›æ–¹æ³•ä¸­å¯ä»¥ä½¿ç”¨ `break` è¯­å¥æ¥æå‰ç»ˆæ­¢å¾ªçŽ¯
- `forEach()` æ˜¯åŒæ­¥çš„ï¼Œå¦‚æžœåœ¨ `forEach()` çš„å›žè°ƒä¸­ä½¿ç”¨ Promise æˆ–å¼‚æ­¥å‡½æ•°ï¼Œé‚£ä¹ˆ `forEach()` ä¼šç«‹å³ç»§ç»­åˆ°ä¸‹ä¸€ä¸ªè¿­ä»£ï¼Œè€Œä¸ä¼šç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆã€‚å› æ­¤ï¼Œä½¿ç”¨å¼‚æ­¥æ“ä½œæ—¶ï¼Œéœ€è¦æ³¨æ„å¯èƒ½çš„é—®é¢˜ï¼Œå¹¶è€ƒè™‘ä½¿ç”¨å…¶ä»–æ–¹æ³•æ¥å¤„ç†å¼‚æ­¥é€»è¾‘ï¼Œä¾‹å¦‚ `for...of` å¾ªçŽ¯é…åˆ `async/await`

```JavaScript
const nums = [1, 2, 3, 4];
let sum = 0;

const getSum = async (a, b) => a + b;

nums.forEach(async (nums) => {
	sum = await getSum(sum, nums);
});

console.log(sum); // 0
```
