对象扁平化：

```js
const flattenObj = (target, prefix = "") => {
  const obj = {};
  for (const key in target) {
    if (target.hasOwnProperty(key)) {
      const newKey = prefix
        ? Array.isArray(target)
          ? `${prefix}[${key}]`
          : `${prefix}.${key}`
        : key;
      if (typeof target[key] === "object" && target[key] !== null)
        Object.assign(obj, flattenObj(target[key], newKey));
      else obj[newKey] = target[key];
    }
  }
  return obj;
};

const obj1 = {
  a: { a1: "vaa", b1: "bb" },
  b: ["b1", { ac: 2 }],
  c: "c1",
};

const obj2 = {
  a: "hello",
  b: 111,
  c: {
    d: "world",
    e: [1, 2, 3],
  },
};

console.log(flattenObj(obj1));
console.log(flattenObj(obj2));
```

```json
{ 'a.a1': 'vaa', 'a.b1': 'bb', 'b[0]': 'b1', 'b[1].ac': 2, c: 'c1' }
{
  a: 'hello',
  b: 111,
  'c.d': 'world',
  'c.e[0]': 1,
  'c.e[1]': 2,
  'c.e[2]': 3
}
```

对象转换路径：

```js
const objToPath = (obj) => {
  const keys = [];
  const dfs = (curObj) => {
    const key = Object.keys(curObj)[0];
    keys.push(key);
    if (typeof curObj[key] === "object" && curObj[key] !== null)
      dfs(curObj[key]);
  };
  dfs(obj);
  return keys.join(".");
};

const obj = {
  a: {
    b: {
      c: {
        d: null,
      },
    },
  },
};

console.log(objectToPath(obj)); // a.b.c.d
```

路径转换对象：

变式一：

```js
const pathToObj = (path) => {
  const keys = path.split(".");
  let obj = {},
    cur = obj;
  keys.forEach((key, index) => {
    cur[key] = index === keys.length - 1 ? null : {};
    cur = cur[key];
  });
  return obj;
};

const path = "a.b.c.d";
console.log(JSON.stringify(pathToObj(path), null, 2));
```

```json
{
  "a": {
    "b": {
      "c": {
        "d": null
      }
    }
  }
}
```

变式二：

```js
const convert = (paths) => {
  const obj = {};
  for (const path of paths) {
    const parts = path.split("/").filter(Boolean);
    let cur = obj;
    for (let i = 0; i < parts.length; ++i) {
      const isLast = i === parts.length - 1;
      if (isLast) {
        cur[parts[i]] = {};
      } else {
        if (!cur[parts[i]]) cur[parts[i]] = {};
        cur = cur[parts[i]];
      }
    }
  }
  return obj;
};

const paths = [
  "/user/docs/Letter.txt",
  "/user/photos/trip.jpg",
  "/user/photos/2024/japan.png",
  "/var/log/system.log",
];

console.log(JSON.stringify(convert(paths), null, 2));
```

嵌套对象的路径取值：

```js
const getValueByStr = (obj, str) => {
  const keys = str.split(".");
  let cur = obj;
  for (const key of keys) {
    if (cur && typeof cur === "object" && key in cur) cur = cur[key];
    else return undefined;
  }
  return cur;
};

const data = {
  user: {
    name: "John Doe",
    address: {
      city: "New York",
      zip: "10001",
    },
    contact: {
      email: "john.doe@example.com",
      phone: "123-456-7890",
    },
  },
};

console.log(getValueByStr(data, "user.name")); // John Doe
console.log(getValueByStr(data, "user.address.city")); // New York
console.log(getValueByStr(data, "user.contact.email")); // john.doe@example.com
console.log(getValueByStr(data, "user.age")); // undefined
console.log(getValueByStr(data, "user.address.country")); // undefined
```