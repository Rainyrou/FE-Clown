正则：

```JavaScript
const formatDate = (date, format) => {
  const addZero = (data) => (data < 10 ? "0" + data : data);
  const map = {
    yyyy: date.getFullYear(),
    yy: date.getFullYear() % 100,
    MM: addZero(date.getMonth() + 1),
    M: date.getMonth() + 1,
    dd: addZero(date.getDate()),
    d: date.getDate(),
    HH: addZero(date.getHours()),
    H: date.getHours(),
    hh: addZero(date.getHours() % 12),
    h: date.getHours() % 12,
    mm: addZero(date.getMinutes()),
    m: date.getMinutes(),
    ss: addZero(date.getSeconds()),
    s: date.getSeconds(),
    w: () => {
      const weekdays = ["日", "一", "二", "三", "四", "五", "六"];
      return weekdays[date.getDay()];
    },
  };
  for (const key in map) format = format.replace(key, map[key]);
  return format;
};

console.log(formatDate(new Date("2024-05-17 14:30:45"), "yyyy-MM-dd hh:mm:ss"));
```

一年第几天：

```js
const getDayOfYear = (dateString) => {
  const year = parseInt(dateString.substring(0, 4));
  const month = parseInt(dateString.substring(4, 6)) - 1;
  const day = parseInt(dateString.substring(6, 8));
  const date = new Date(year, month, day);
  const start = new Date(date.getFullYear(), 0, 0);
  const diff = date - start;
  const oneDay = 1000 * 60 * 60 * 24;
  const dayOfYear = Math.floor(diff / oneDay);
  return dayOfYear;
}
```