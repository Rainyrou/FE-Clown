```js
const requestWithRetry = (fn, maxCount = 5, interval = 1000) => {
  let count = 0;
  const execute = async () => {
    try {
      ++count;
      const result = await fn();
      return result;
    } catch (err) {
      if (count < maxCount) {
        console.warn(`${count}`, `${err}`);
        await new Promise((resolve) => setTimeout(() => resolve(), interval));
        return execute();
      } else {
        throw new Error(`${err}`);
      }
    }
  };
  return execute();
};

const mockRequest = () =>
  new Promise((resolve, reject) =>
    setTimeout(() => reject("request fail"), 1000)
  );

requestWithRetry(mockRequest)
  .then((res) => console.log(res))
  .catch((err) => console.warn(err));
```

```
1 request fail
2 request fail
3 request fail
4 request fail
Error: request fail
```

```JavaScript
const fetchData = () =>
  new Promise((resolve) => setTimeout(() => resolve("request success"), 4000));
const timeOut = (delay) =>
  new Promise((resolve, reject) =>
    setTimeout(() => reject("request fail"), delay)
  );
Promise.race([fetchData(), timeOut(5000)])
  .then((res) => console.log(res))
  .catch((err) => console.error(err));
```