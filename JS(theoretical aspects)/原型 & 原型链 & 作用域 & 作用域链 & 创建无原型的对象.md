JavaScript 基于原型，可通过原型和原型链实现继承机制，每个 JavaScript 对象在创建时均关联一个原型对象，其为 JavaScript 对象的隐藏属性，以 `[[Prototype]]` 表示，可通过 `__proto__`（ES5）或 `Object.getPrototypeOf`（ES6） 获取。`prototype` 属性为 JavaScript 函数的独有属性，其在函数定义时自动创建，其值为一个包含 `constructor` 属性的对象，该属性指向函数自身。原型链为 JavaScript 对象通过其原型与其他 JavaScript 对象相关联的链，当访问某对象的属性或方法时，若在 JavaScript 对象本身没找到，则在其原型上查找，若原型上没找到，则继续在原型的原型上查找，直到找到该属性或方法或到达原型链末端，原型链末端为 `Object.prototype`（ `Object.prototype` 的原型为 `null`），若在原型链的任何地方均找不到指定的属性或方法，则返回 `undefined`

作用域：变量/函数的可访问范围

- 全局作用域：顶层作用域
- 函数作用域：函数定义时创建的作用域，通过 `var` 声明的变量具有函数作用域
- 块级作用域：由花括号包裹的代码块，通过 `let/const/class` 声明的变量具有块级作用域

作用域链为由多个嵌套作用域构成的链式结构，为连接作用域和执行上下文的桥梁

* 当函数定义时，JavaScript 引擎为函数添加 [[Scope]] 属性，其引用函数定义时所有外层作用域，当函数调用时，JavaScript 引擎创建当前函数的词法环境并绑定外层引用，形成"当前词法环境 → 外层词法环境 → ... → 全局词法环境"的链式结构即作用域链，函数执行完后，其执行上下文弹出"执行上下文栈"，作用域链被垃圾回收
* 访问变量时，JavaScript 引擎沿着作用域链查找，若当前词法环境没找到，则在其外层词法环境查找，若外层词法环境没找到，则继续在外层词法环境的外层词法环境查找，直到找到该变量或全局词法环境，若仍未找到，变量通过 `var` 声明，则值为 `undefined`，变量通过 `let/const` 声明，则抛出 `ReferenceError`

普通函数的 `__proto__`（包括 Object 和 Function 自身） 为 `Function.prototype`，因为 JavaScript 函数通过 `Function` 构造，而普通函数的 `prototype` 为一个对象，该对象的 `constructor` 属性指向函数本身

```js
function foo() {}
console.log(foo.__proto__ === Function.prototype); // true
console.log(foo.prototype.constructor === foo); // true
Object.__proto__ === Function.prototype // true
Function.__proto__ === Function.prototype // true
Function.prototype.__proto__ === Object.prototype // true 
```

创建无原型的对象：

```js
const obj = Object.create(null);
```

`obj` 不继承 `Object.prototype` 的任何属性或方法，其 `[[Prototype]]` 内部属性设置为 `null` 即通过 `__proto__` 或 `Object.getPrototypeOf` 访问的原型

```js
Function.prototype.a = "Function";
Object.prototype.a = "Object";
function Person() {}
var child = new Person();
console.log(Person.a); // Function
console.log(child.a); // Object
console.log(child.__proto__.__proto__.constructor.constructor.constructor); // [Function: Function]
child.__proto__ // Person.prototype
child.__proto__.__proto__ // Object.prototype
child.__proto__.__proto__.constructor // Object
child.__proto__.__proto__.constructor.constructor // Function
```
