闭包是函数与其词法作用域的组合，允许访问定义在函数外部的词法作用域，因为闭包保存其词法作用域，外部函数中的变量仍被内部函数引用，引用计数不为 0。JavaScript 函数在创建时将所在的作用域保存于 `[[Environment]]` 内部属性，当函数被调用时，JavaScript 引擎创建新的执行上下文并推入执行上下文栈，同时创建新的词法环境，其外部引用指向函数的 `[[Environment]]` 内部属性，当函数访问变量时，从该词法环境中查找，若未找到，则沿着作用域链逐级向上查找，直到全局环境

实现：

- 外部函数定义内部函数，内部函数引用外部函数中的变量，外部函数返回该内部函数
- 在对象方法中定义内部函数，内部函数引用定义它们的作用域中的变量
- 通过立即执行函数表达式创建私有作用域，内部变量对外部不可见，但可通过暴露的函数访问

注意事项：

- 按需使用闭包，无需使用时移除对外部函数中变量的引用
- 限制闭包生命周期，确保其比所操作的 DOM 元素的生命周期短
- 通过 WeakMap 或 WeakSet 弱引用

```js
function createAccumulator(initialValue) {
  let sum = initialValue || 0;
  return function (addValue) {
    if (addValue === undefined) return sum;
    sum += addValue;
    return sum;
  };
}

const totalA = createAccumulator(10);

console.log("A1:", totalA(5)); // 15
console.log("A2:", totalA(2)); // 17
console.log("A3:", totalA()); // 17
console.log("A4:", totalA(3)); // 20
```

通过闭包保留  `sum`，每次调用内嵌函数均操作同一  `sum`
