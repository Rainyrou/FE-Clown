[227. 基本计算器 II](https://leetcode.cn/problems/basic-calculator-ii/description/)

```javascript
var calculate = function (s) {
  const ops = [];
  let cur = 0,
    lastOp = "+";
  s = s + "+";
  for (const ch of s) {
    if (ch === " ") {
      continue;
    } else if (!isNaN(ch)) {
      cur = cur * 10 + Number(ch);
    } else {
      if (lastOp === "+") {
        ops.push(cur);
      } else if (lastOp === "-") {
        ops.push(-cur);
      } else if (lastOp === "*") {
        ops[ops.length - 1] *= cur;
      } else if (lastOp === "/") {
        ops[ops.length - 1] = (ops[ops.length - 1] / cur) | 0;
      }
      lastOp = ch;
      cur = 0;
    }
  }
  return ops.reduce((a, b) => a + b, 0);
};
```

* 栈存储待累加的加减项，加减直接入栈，乘除则取出栈顶元素即时运算，再将结果入栈，最后累加栈内所有元
* 原始字符串的结构为「数字 + 运算符 + 数字 +…+ 数字」，通过`s = s + '+'` 补全最后一个数字的运算触发条件，运算只有在遇到运算符时才触发，通过上一运算符处理当前数字，再将结果入栈