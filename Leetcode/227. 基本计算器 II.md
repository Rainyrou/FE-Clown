[227. 基本计算器 II](https://leetcode.cn/problems/basic-calculator-ii/description/)

```javascript
var calculate = function (s) {
  const ops = [];
  let cur = 0,
    lastOp = "+";
  s = s + "+";
  for (const ch of s) {
    if ("0" <= ch && ch <= "9") {
      cur = cur * 10 + Number(ch);
    } else if (ch === " ") {
      continue;
    } else {
      if (lastOp === "+") {
        ops.push(cur);
      } else if (lastOp === "-") {
        ops.push(-cur);
      } else if (lastOp === "*") {
        ops[ops.length - 1] *= cur;
      } else if (lastOp === "/") {
        ops[ops.length - 1] = (ops[ops.length - 1] / cur) | 0;
      }
      lastOp = ch;
      cur = 0;
    }
  }
  return ops.reduce((a, b) => a + b, 0);
};
```