[502. IPO](https://leetcode.cn/problems/ipo/)

```javascript
var findMaximizedCapital = function(k, w, profits, capital) {
    const n = profits.length;
    const projects = Array.from({ length: n }, (_, i) => [capital[i], profits[i]]);
    projects.sort((a, b) => a[0] - b[0]);
    const maxHeap = [];
    const push = (val) => {
        maxHeap.push(val);
        let i = maxHeap.length - 1;
        while(i > 0) {
            let parent = (i - 1) >> 1;
            if(maxHeap[parent] >= maxHeap[i]) break;
            [maxHeap[parent], maxHeap[i]] = [maxHeap[i], maxHeap[parent]];
            i = parent;
        }
    };
    const pop = () => {
        let peek = maxHeap[0];
        let last = maxHeap.pop();
        if(maxHeap.length > 0) {
            let len = maxHeap.length;
            maxHeap[0] = last;
            let i = 0;
            while(true) {
                let child = 2 * i + 1;
                if(child >= len) break;
                if(child + 1 < len && maxHeap[child] < maxHeap[child + 1]) child++;
                if(maxHeap[child] <= maxHeap[i]) break;
                [maxHeap[child], maxHeap[i]] = [maxHeap[i], maxHeap[child]];
                i = child;
            }
        }
        return peek;
    };
    let idx = 0;
    for(let i = 0;i < k;++i) {
        while(idx < n && w >= projects[idx][0]) push(projects[idx++][1]);
        if(maxHeap.length === 0) break;
        w += pop();
    }
    return w;
};
```