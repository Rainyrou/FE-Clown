[662. 二叉树最大宽度](https://leetcode.cn/problems/maximum-width-of-binary-tree/description/)

107 / 117 个通过的测试用例

```js
var widthOfBinaryTree = function (root) {
  if (!root) return 0;
  const queue = [[root, 1]];
  let ans = -Infinity;
  while (queue.length) {
    const levelSize = queue.length;
    let left = queue[0][1],
      right = queue[queue.length - 1][1];
    ans = Math.max(ans, right - left + 1);
    for (let i = 0; i < levelSize; ++i) {
      const [cur, index] = queue.shift();
      if (cur.left) queue.push([cur.left, index * 2]);
      if (cur.right) queue.push([cur.right, index * 2 + 1]);
    }
  }
  return ans;
};
```

优化：无需存储绝对索引，只需记录各层节点相对于"当前层最左节点"的偏移量即可，避免溢出问题

```javascript
var widthOfBinaryTree = function (root) {
  const queue = [[root, 1]];
  let ans = -Infinity;
  while (queue.length) {
    const levelSize = queue.length;
    let left = queue[0][1],
      right = queue[queue.length - 1][1];
    ans = Math.max(ans, right - left + 1);
    for (let i = 0; i < levelSize; ++i) {
      const [cur, index] = queue.shift();
      if (cur.left) queue.push([cur.left, (index - left) * 2]);
      if (cur.right) queue.push([cur.right, (index - left) * 2 + 1]);
    }
  }
  return ans;
};
```
