Diff 算法是 Virtual DOM 的核心，用来比较新旧虚拟 DOM 树中节点的差异，并根据差异对真实 DOM 进行最小量更新

React 递归进行同层 vnode 比较（Tree Diff），识别差异后将其添加到 `Diff` 队列中，得到一个 patch 树，统一批量操作更新 DOM。若组件类型或 key 不同，React 直接卸载旧组件并创建新组件，若组件类型相同，React 保留 DOM 节点，仅比较和更新变化的属性（Component Diff）。对于列表元素的处理，React 通过比较新旧集合中节点的位置和 `lastIndex` 来判断节点是否需要移动。如果新的 vnode 存在而旧的不存在，则创建新节点；反之，则删除旧节点（Element Diff）

###### Diff 算法的优点

1. 性能提升：比较新旧虚拟 DOM 树中节点的差异，并根据差异对真实 DOM 进行最小量更新，而非重新渲染整个 DOM 树，减少 DOM 的操作次数
2. 简化代码：我们直接编写声明式的 UI 代码，无需直接操作 DOM，无需关心如何高效更新 DOM
3. 行为可预测：保证组件的状态变化以可预测的方式反映到 UI 上，使 React 的状态管理更加清晰可控


