Vite 的 Hot Module Replacement 之所以快速，是因为其独特的设计和技术实现方式

1. 基于 ESM：

- Vite 基于浏览器原生 ESM 的 no-bundle 服务进行模块加载，Vite dev-server 可以直接请求需要的模块，只转换和加载所需文件。Vite 利用 HTTP 缓存机制来缓存未更改的模块，浏览器可以复用缓存的模块
- 与传统的打包和重新加载整个 bundle 相比，此种方式允许 Vite dev-server 可以直接请求需要的模块，无需等待整个项目的重新打包，从而显著加快模块的更新和重新构建速度

2. 按需编译

- Vite 通过精确的模块图依赖分析和缓存策略，使得 HMR 非常快速，Vite 知道哪些文件被改变，以及哪些模块依赖于这些文件，因此当请求一个文件时，Vite 只会编译这个文件和它的依赖，而不是像传统构建工具那样进行全量编译

3. 预构建依赖优化

- 依赖预构建：Vite 在第一次启动时会对 `node_modules` 中的依赖进行预构建，将其转换为 ES 模块，缓存预构建的结果，使得在后续热更新中无需处理这些依赖

4. 模块级 & 气泡传播

- 模块级热更新：Vite 的 HMR 机制作用于模块级别，它可以精确地转换和加载需要的模块，而无需刷新整个页面，这进一步减少了热更新所需的时间，同时保持了应用的状态
- HMR 气泡传播：Vite 的 HMR 机制利用了 ESM 的导入链，允许更新事件气泡上升至依赖链，直至找到可以处理该更新的边界，这种机制可避免不必要的模块重新加载

